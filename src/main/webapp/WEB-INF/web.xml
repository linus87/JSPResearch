<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee" xmlns:jsp="http://java.sun.com/xml/ns/javaee/jsp" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>JSPResearch</display-name>
  <servlet>
    <display-name>DefaultServlet</display-name>
    <servlet-name>DefaultServlet</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
      <param-name>debug</param-name>
      <param-value>0</param-value>
    </init-param>
    <init-param>
      <param-name>listings</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>localXsltFile</param-name>
      <param-value>/default/listings.xslt</param-value>
    </init-param>
    <init-param>
      <param-name>contextXsltFile</param-name>
      <param-value>/default/listings.xslt</param-value>
    </init-param>
    <init-param>
      <param-name>globalXsltFile</param-name>
      <param-value>/default/listings.xslt</param-value>
    </init-param>
    <init-param>
      <param-name>readmeFile</param-name>
      <param-value>/default/readme.txt</param-value>
    </init-param>
    <init-param>
      <param-name>showServerInfo</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>gzip</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>input</param-name>
      <param-value>2048</param-value>
    </init-param>
    <init-param>
      <param-name>output</param-name>
      <param-value>2048</param-value>
    </init-param>
    <init-param>
      <param-name>sendfileSize</param-name>
      <param-value>0</param-value>
    </init-param>
    <!-- <init-param>
      <param-name>fileEncoding</param-name>
      <param-value>UTF-8</param-value>
    </init-param> -->
    <init-param>
      <param-name>readonly</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>useAcceptRanges</param-name>
      <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <display-name>MainServlet</display-name>
    <servlet-name>MainServlet</servlet-name>
    <servlet-class>com.linus.servlets.MainServlet</servlet-class>
    <init-param>
      <param-name>username</param-name>
      <param-value>linus</param-value>
    </init-param>
    <init-param>
      <param-name>color</param-name>
      <param-value>#0000CC</param-value>
    </init-param>
  </servlet>
  <servlet>
    <display-name>RegisterJSP</display-name>
    <servlet-name>RegisterJSP</servlet-name>
    <jsp-file>/register.jsp</jsp-file>
    <init-param>
      <param-name>username</param-name>
      <param-value>linus</param-value>
    </init-param>
    <init-param>
      <param-name>color</param-name>
      <param-value>#0000CC</param-value>
    </init-param>
  </servlet>
  <servlet>
    <display-name>SecuredServlet</display-name>
    <servlet-name>SecuredServlet</servlet-name>
    <servlet-class>com.linus.servlets.SecuredServlet</servlet-class>
    <security-role-ref>
      <role-name>manager</role-name>
      <role-link>admin</role-link>
    </security-role-ref>
  </servlet>
  <servlet-mapping>
    <servlet-name>DefaultServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>RegisterJSP</servlet-name>
    <url-pattern>/register/register.jsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>SecuredServlet</servlet-name>
    <url-pattern>/member/*</url-pattern>
    <url-pattern>/admin/*</url-pattern>
  </servlet-mapping>
  <filter>
    <filter-name>LogFilter</filter-name>
    <filter-class>com.linus.filters.LogFilter</filter-class>
    <init-param>
      <param-name>logType</param-name>
      <param-value>special</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>authenticationFilter</filter-name>
    <filter-class>com.linus.filters.AuthenticationFilter</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>LogFilter</filter-name>
    <url-pattern>/filter/*</url-pattern>
    <url-pattern>/locale/*</url-pattern>
    <url-pattern>/request/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>FORWARD</dispatcher>
  </filter-mapping>
  <filter-mapping>
    <filter-name>authenticationFilter</filter-name>
    <url-pattern>/filter/*</url-pattern>
  </filter-mapping>
  <error-page>
    <error-code>500</error-code>
    <location>/errors/servererror.jsp</location>
  </error-page>
  <error-page>
    <error-code>404</error-code>
    <location>/errors/404.jsp</location>
  </error-page>
  <error-page>
    <exception-type>
			fedora.server.errors.servletExceptionExtensions.Forbidden403Exception
		</exception-type>
    <location>/errors/forbidden-403.jsp</location>
  </error-page>
  <security-constraint>
    <web-resource-collection>
      <web-resource-name>member resources</web-resource-name>
      <url-pattern>/member/*</url-pattern>
      <url-pattern>/admin/*</url-pattern>
      <http-method>GET</http-method>
      <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
      <description>Let only managers use this app</description>
      <role-name>*</role-name>
    </auth-constraint>
    <user-data-constraint>
      <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
  </security-constraint>
  <security-role>
    <role-name>monitor</role-name>
  </security-role>
  <security-role>
    <role-name>admin</role-name>
  </security-role>
  <login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>DigestPropertiesRealm</realm-name>
  </login-config>
  <jsp-config>
    <taglib>
      <taglib-uri>mytags</taglib-uri>
      <taglib-location>/WEB-INF/mytaglib.tld</taglib-location>
    </taglib>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/el.jsp</url-pattern>
      <el-ignored>true</el-ignored>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/script.jsp</url-pattern>
      <scripting-invalid>true</scripting-invalid>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/page-encoding.jsp</url-pattern>
      <page-encoding>GB18030</page-encoding>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/include.jsp</url-pattern>
      <include-prelude>/shared/prelude.jspf</include-prelude>
      <include-coda>/shared/coda.jspf</include-coda>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/is-xml.jsp</url-pattern>
      <is-xml>true</is-xml>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/deferred-el.jsp</url-pattern>
      <deferred-syntax-allowed-as-literal>true</deferred-syntax-allowed-as-literal>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/remove-whitespace.jsp</url-pattern>
      <trim-directive-whitespaces>true</trim-directive-whitespaces>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/default-content-type.jsp</url-pattern>
      <default-content-type>text/css</default-content-type>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/buffer.jsp</url-pattern>
      <buffer>1kb</buffer>
    </jsp-property-group>
    <jsp-property-group>
      <url-pattern>/jsp-config/jsp-property-group/unknown-namespace.jsp</url-pattern>
      <error-on-undeclared-namespace>true</error-on-undeclared-namespace>
    </jsp-property-group>
  </jsp-config>
  <welcome-file-list>
    <welcome-file>welcome.html</welcome-file>
  </welcome-file-list>
</web-app>